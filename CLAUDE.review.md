# PRレビューガイドライン

PRレビュー時にClaudeが確認すべき観点を定義します。

---

## レビューの基本姿勢

- 問題点の指摘だけでなく、改善案を必ず提示する
- 重大度を明示する（後述のラベルを使用）
- 良い実装にはポジティブなフィードバックも行う
- 主観的な好みより、客観的な理由に基づいてコメントする

---

## 重大度ラベル

| ラベル | 意味 | 対応 |
|--------|------|------|
| `[MUST]` | 必須修正。マージ不可 | 修正後に再レビュー |
| `[SHOULD]` | 強く推奨。原則修正 | 修正またはコメントで理由説明 |
| `[IMO]` | 提案・好み。対応任意 | 検討してもらえれば十分 |
| `[NIT]` | 些細な指摘（typo等）| 気が向いたら修正 |
| `[GOOD]` | 良い実装の称賛 | 対応不要 |

---

## チェックリスト

### 正確性・安全性
- [ ] バグや論理エラーがないか
- [ ] エッジケース（空配列、null、undefinedなど）が考慮されているか
- [ ] XSS / CSRF / インジェクションなどのセキュリティリスクがないか
- [ ] 機密情報（APIキー、パスワード）がコードやログに混入していないか
- [ ] 非同期処理のエラーハンドリングが適切か

### TypeScript
- [ ] `any` が不必要に使われていないか
- [ ] 型が適切に定義・推論されているか
- [ ] 実行時エラーになりうる型キャスト（`as`）が使われていないか

### Vue / Nuxt
- [ ] Composition APIのベストプラクティスに従っているか
- [ ] `defineProps` / `defineEmits` に型が定義されているか
- [ ] `useFetch` / `useAsyncData` が適切に使われているか
- [ ] 不必要なクライアントサイドレンダリングになっていないか
- [ ] SEO・アクセシビリティへの配慮があるか（`alt`, `aria-*` 等）
- [ ] `v-for` に `:key` が設定されているか

### パフォーマンス
- [ ] 不必要な再レンダリングが発生しないか
- [ ] 重い処理が同期的にUI thread をブロックしていないか
- [ ] 画像・アセットが最適化されているか

### コード品質
- [ ] 関数・変数名が意図を適切に表しているか
- [ ] 1つの関数が単一責任を持っているか（過度に長い関数がないか）
- [ ] DRY原則が守られているか（同じロジックの重複がないか）
- [ ] マジックナンバー・マジック文字列が定数化されているか
- [ ] 不要なコメントアウトやデバッグコードが残っていないか

### テスト
- [ ] 新機能・バグ修正にテストが追加されているか
- [ ] テストが意味のあるケースをカバーしているか
- [ ] テスト名が何をテストしているか明確か

### 設計
- [ ] 既存のアーキテクチャ・パターンと一貫しているか
- [ ] 過度に複雑な実装になっていないか（シンプルな解決策があるか）
- [ ] 将来の変更を考慮した適度な抽象化がされているか

---

## レビューコメントの書き方

```
[MUST] `any` を使わず、適切な型を定義してください。

現在:
```ts
const data: any = await fetchUser()
```

提案:
```ts
const data: User = await fetchUser()
```

`app/types/user.ts` に `User` 型が定義済みです。
```

---

## レビュー対象外

以下はレビューのスコープ外とし、コメントしない：
- Linter / Formatter が自動修正できる問題（CIで検出されるため）
- PRの説明に明示的に「スコープ外」と記載されている変更
- 別のPRでリファクタリング予定と明記されている技術的負債
